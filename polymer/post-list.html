<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../elements/post-service.html">
<link rel="import" href="../elements/soundcloud-player.html">
<link rel="import" href="../elements/facebook-login.html">
<link rel="import" href="../elements/arrow-up.html">
<link rel="import" href="../elements/arrow-down.html">
<link rel="import" href="post-card.html">

<polymer-element name="post-list" attributes="show">
  <template>
    <style>
    :host {
      display: block;
      width: 100%;
    }

    p {
      display: inline;
    }
    post-card {
      margin-bottom: 30px;
    }


    #vote-count {
      position: relative;
      float: right;
      top: -42.5px;
      right: 0px;
      margin: 0;
      color: #FF6600;
    }

    p {
      display: none;
    }

/*    .username {
      margin: 0;  
    }*/
    </style>
    
    <post-service id="service" posts="{{posts}}"></post-service>

    <div layout vertical center>

      <template repeat="{{post in posts}}">

        <post-card>
          <h3 class="genre">{{post.genre}}</h3>
          <!-- <img src="{{post.avatar}}" width="70" height="70"> -->

          <arrow-up class="arrows" id="vote-up" onclick="upVote()"></arrow-up>
          <arrow-down class="arrows" id="vote-down"></arrow-down>

          <p id="post-id">{{post._id}}</p>

          <h3 id="vote-count">{{post.vote}}</h3>


          <soundcloud-player track-id="{{post.track}}"></soundcloud-player>


          
        </post-card>
      </template>

    </div>
    
  </template>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script>


    function upVote () {
          var post = document.getElementById("post-id");
          var post_id = post.value;

          var vote = document.getElementById("vote-count");
          var vote_value = vote.value;

          $.ajax ({
              type: "put",
              url: '/posts' + post_id,
              data: { vote: vote_value + 1},
              dataType: 'json'
              });

    };


    // var post = document.getElementById("post-id");
    // var post_id = post.value;






  </script>

  <script>
  Polymer({});
  </script>

</polymer-element>
